(function($){function getHashedLinkTarget(url){var hashIndex=url.indexOf("#");return(hashIndex!=-1)?url.substring(hashIndex):url}function wireAssignToMeLink(context){$("#assign-to-me-trigger",context).click(function(e){e.preventDefault();var assigneeId=getHashedLinkTarget(jQuery(this).attr("href"));var loggedInUser=JIRA.Meta.getLoggedInUser();var assigneeSelect=$(assigneeId,context);if($(assigneeId+"-single-select",context).length){assigneeSelect.trigger("set-selection-value",loggedInUser.name)}else{assigneeSelect.val(loggedInUser.name).change()}})}function wireAssigneeEditGroup(context){$(".assignee-edit-group",context).each(function(){var $this=$(this);var assigneeFieldId=$this.attr("rel");$("#assignee_userpicker_dummy_"+assigneeFieldId+"_container",context).click(function(){$("#assignee_radio_picker_"+assigneeFieldId,context).attr("checked","checked")});$this.parents("form[name=jiraform]").submit(function(){$this.find("input[name=assignee_radio]:checked").each(function(){if(this.id=="assignee_radio_picker_"+assigneeFieldId){$("#"+assigneeFieldId,context).val($("#assignee_userpicker_dummy_"+assigneeFieldId,context).val())}else{$("#"+assigneeFieldId,context).val($(this).val())}})})})}function createAssigneePicker(ctx){$(".js-assignee-picker",ctx).each(function(){var $this=$(this),editValue=$this.data("editValue");var control=new JIRA.AssigneePicker({element:$this,editValue:editValue});$(document).trigger("ready.single-select.assignee",control)})}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,context,reason){if(reason!==JIRA.CONTENT_ADDED_REASON.panelRefreshed){createAssigneePicker(context);wireAssignToMeLink(context);wireAssigneeEditGroup(context)}})})(AJS.$);