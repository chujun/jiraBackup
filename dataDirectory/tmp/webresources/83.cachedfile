/* module-key = 'com.atlassian.streams.jira.inlineactions:actionHandlers', location = '/js/inline-actions/streams.jira.action.i18n.js' */
ActivityStreams.i18n.put('streams.jira.action.issue.vote.failure.general', 'An unknown error occurred while voting.');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.failure.authentication', 'Cannot authenticate JIRA user.');
ActivityStreams.i18n.put('streams.jira.action.issue.vote.failure.precondition.failed', 'You could not vote for this issue at this time.');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.failure.precondition.failed', 'You could not be added as a watcher at this time.');
ActivityStreams.i18n.put('streams.jira.action.issue.vote.title', 'Vote');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.failure.general', 'An unknown error occurred while adding you as a watcher.');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.success', 'Successfully added as a watcher.');
ActivityStreams.i18n.put('streams.jira.action.issue.vote.failure.previously.voted', 'You have already voted for this issue.');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.failure.previously.watched', 'You are already watching this issue.');
ActivityStreams.i18n.put('streams.jira.action.issue.vote.success', 'You have voted for this issue.');
ActivityStreams.i18n.put('streams.jira.action.issue.watch.title', 'Watch');
ActivityStreams.i18n.put('streams.jira.action.issue.vote.failure.authentication', 'Cannot authenticate JIRA user.');

/* module-key = 'com.atlassian.streams.jira.inlineactions:actionHandlers', location = '/js/inline-actions/issue-vote.js' */
(function(){function b(i){var h=AJS.$(i.target),f=h.closest("div.activity-item"),g,d=i.data&&i.data.feedItem;if(d){g=d.links["http://streams.atlassian.com/syndication/issue-vote"]}else{ActivityStreams.InlineActions.statusMessage(f,ActivityStreams.i18n.get("streams.jira.action.issue.vote.failure.general"),"error")}i.preventDefault();c(f);AJS.$.ajax({type:"POST",url:ActivityStreams.InlineActions.proxy(g,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(){ActivityStreams.InlineActions.statusMessage(f,ActivityStreams.i18n.get("streams.jira.action.issue.vote.success"),"info")},error:function(e){var j;if(e.status==401||e.rc==401){j=ActivityStreams.i18n.get("streams.jira.action.issue.vote.failure.authentication")}else{if(e.status==412||e.rc==412){j=ActivityStreams.i18n.get("streams.jira.action.issue.vote.failure.precondition.failed")}else{if(e.status==409||e.rc==409){j=ActivityStreams.i18n.get("streams.jira.action.issue.vote.failure.previously.voted")}else{j=ActivityStreams.i18n.get("streams.jira.action.issue.vote.failure.general")}}}ActivityStreams.InlineActions.statusMessage(f,j,"error")}})}function c(d){d.find("a.activity-item-issue-vote-link").addClass("hidden");d.find("span.activity-item-issue-vote-label").removeClass("hidden")}function a(d){if(!d.links["http://streams.atlassian.com/syndication/issue-vote"]){return}var f=AJS.$('<a href="#" class="activity-item-issue-vote-link"></a>').text(ActivityStreams.i18n.get("streams.jira.action.issue.vote.title")).bind("click",{feedItem:d},b),e=AJS.$('<span class="activity-item-issue-vote-label hidden"></span>').text(ActivityStreams.i18n.get("streams.jira.action.issue.vote.title"));return f.add(e)}ActivityStreams.registerAction("issue file",a,9)})();
/* module-key = 'com.atlassian.streams.jira.inlineactions:actionHandlers', location = '/js/inline-actions/issue-watch.js' */
(function(){function b(i){var h=AJS.$(i.target),f=h.closest("div.activity-item"),g,d=i.data&&i.data.feedItem;if(d){g=d.links["http://streams.atlassian.com/syndication/watch"]}else{ActivityStreams.InlineActions.statusMessage(f,ActivityStreams.i18n.get("streams.jira.action.issue.watch.failure.general"),"error")}i.preventDefault();c(f);AJS.$.ajax({type:"POST",url:ActivityStreams.InlineActions.proxy(g,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(){ActivityStreams.InlineActions.statusMessage(f,ActivityStreams.i18n.get("streams.jira.action.issue.watch.success"),"info")},error:function(e){var j;if(e.status==401||e.rc==401){j=ActivityStreams.i18n.get("streams.jira.action.issue.watch.failure.authentication")}else{if(e.status==412||e.rc==412){j=ActivityStreams.i18n.get("streams.jira.action.issue.watch.failure.precondition.failed")}else{if(e.status==409||e.rc==409){j=ActivityStreams.i18n.get("streams.jira.action.issue.watch.failure.previously.watched")}else{j=ActivityStreams.i18n.get("streams.jira.action.issue.watch.failure.general")}}}ActivityStreams.InlineActions.statusMessage(f,j,"error")}})}function c(d){d.find("a.activity-item-issue-watch-link").addClass("hidden");d.find("span.activity-item-issue-watch-label").removeClass("hidden")}function a(d){if(!d.links["http://streams.atlassian.com/syndication/watch"]){return}var f=AJS.$('<a href="#" class="activity-item-issue-watch-link"></a>').text(ActivityStreams.i18n.get("streams.jira.action.issue.watch.title")).bind("click",{feedItem:d},b),e=AJS.$('<span class="activity-item-issue-watch-label hidden"></span>').text(ActivityStreams.i18n.get("streams.jira.action.issue.watch.title"));return f.add(e)}AJS.$("body").bind("issueCommented",function(i,d){if(!d.links["http://streams.atlassian.com/syndication/watch"]){return}var h=AJS.$(i.target),g=h.closest("div.activity-item");if(!g){return}var f=d.links["http://streams.atlassian.com/syndication/watch"];AJS.$.ajax({type:"GET",url:ActivityStreams.InlineActions.proxy(f,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(e){if(e){c(g)}},error:function(e){}})});ActivityStreams.registerAction("issue comment file",a,10)})();
